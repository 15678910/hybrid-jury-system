# 🔄 수정 전후 비교

## App.jsx 주요 변경사항

### 1. State 선언 (57번째 줄 추가)

**❌ 수정 전:**
```javascript
const [adminPassword, setAdminPassword] = useState('');

const ADMIN_PASSWORD = 'admin2025';
```

**✅ 수정 후:**
```javascript
const [adminPassword, setAdminPassword] = useState('');
const [showPosterModal, setShowPosterModal] = useState(false);  // ← 추가됨!

const ADMIN_PASSWORD = 'admin2025';
```

---

### 2. 네비게이션 버튼 (590-603번째 줄)

**❌ 수정 전:**
```javascript
<div className="hidden md:flex space-x-6 text-sm items-center">
    <button onClick={() => scrollToSection('necessity')}>도입 필요성</button>
    <button onClick={() => scrollToSection('cases')}>해외 사례</button>
    <button onClick={() => scrollToSection('constitution')}>헌법적 근거</button>
    <button onClick={() => scrollToSection('bill')}>법안 제안</button>
    <button 
        onClick={() => scrollToSection('signature')} 
        className="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition font-bold"
    >
        참여하기
    </button>
    {/* 관리자 버튼... */}
</div>
```

**✅ 수정 후:**
```javascript
<div className="hidden md:flex space-x-6 text-sm items-center">
    <button onClick={() => scrollToSection('necessity')}>도입 필요성</button>
    <button onClick={() => scrollToSection('cases')}>해외 사례</button>
    <button onClick={() => scrollToSection('constitution')}>헌법적 근거</button>
    <button onClick={() => scrollToSection('bill')}>법안 제안</button>
    
    {/* ⭐ 새로 추가된 포스터 보기 버튼 ⭐ */}
    <button 
        onClick={() => setShowPosterModal(true)} 
        className="bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition font-bold"
    >
        🎵 포스터 보기
    </button>
    
    <button 
        onClick={() => scrollToSection('signature')} 
        className="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition font-bold"
    >
        참여하기
    </button>
    {/* 관리자 버튼... */}
</div>
```

---

### 3. 푸터 다음에 모달 추가 (1267-1280번째 줄)

**❌ 수정 전:**
```javascript
{/* 푸터 */}
<footer className="bg-gray-900 text-gray-400 py-6 px-4">
    <div className="container mx-auto text-center">
        <p>© 주권자사법개혁추진위원회(준)</p>
    </div>
</footer>

{/* 플로팅 챗봇 버튼 */}
<button onClick={() => setShowChatbot(true)}>
    💬
</button>
```

**✅ 수정 후:**
```javascript
{/* 푸터 */}
<footer className="bg-gray-900 text-gray-400 py-6 px-4">
    <div className="container mx-auto text-center">
        <p>© 주권자사법개혁추진위원회(준)</p>
    </div>
</footer>

{/* ⭐ 새로 추가된 포스터 모달 ⭐ */}
{showPosterModal && (
    <div className="fixed inset-0 bg-black bg-opacity-90 z-50 overflow-auto">
        <Poster onClose={() => setShowPosterModal(false)} />
    </div>
)}

{/* 플로팅 챗봇 버튼 */}
<button onClick={() => setShowChatbot(true)}>
    💬
</button>
```

---

## Poster.jsx 주요 변경사항

### 전체 구조 변경

**❌ 수정 전:**
```javascript
import { useEffect, useRef, useState } from 'react'

function Poster() {
  // ❌ audioRef가 선언되지 않음!
  const [audioError, setAudioError] = useState(false)

  useEffect(() => {
    const playAudio = async () => {
      try {
        if (audioRef.current) {  // ❌ 정의되지 않은 변수 사용!
          await audioRef.current.play()
        }
      } catch (error) {
        console.log('자동 재생 실패:', error)
        setAudioError(true)
      }
    }
    const timer = setTimeout(playAudio, 500)
    return () => clearTimeout(timer)
  }, [])

  const handleParticipate = () => {
    window.location.href = '/#/participate'  // ❌ 하드코딩된 경로
  }

  return (
    <div className="min-h-screen bg-black flex items-center justify-center p-4">
      {/* ❌ 닫기 버튼이 없음 */}
      {/* ... */}
    </div>
  )
}

export default Poster
```

**✅ 수정 후:**
```javascript
import { useEffect, useRef, useState } from 'react'

function Poster({ onClose }) {  // ✅ onClose props 추가!
  const audioRef = useRef(null)  // ✅ audioRef 선언 추가!
  const [audioError, setAudioError] = useState(false)

  useEffect(() => {
    const playAudio = async () => {
      try {
        if (audioRef.current) {
          await audioRef.current.play()
        }
      } catch (error) {
        console.log('자동 재생 실패:', error)
        setAudioError(true)
      }
    }
    const timer = setTimeout(playAudio, 500)
    return () => clearTimeout(timer)
  }, [])

  const handleParticipate = () => {
    if (onClose) onClose()  // ✅ 모달 닫기
    // ✅ DOM API로 스크롤
    setTimeout(() => {
      const participateSection = document.getElementById('signature')
      if (participateSection) {
        participateSection.scrollIntoView({ behavior: 'smooth' })
      }
    }, 100)
  }

  return (
    <div className="min-h-screen bg-black flex items-center justify-center p-4">
      <audio ref={audioRef} loop preload="auto">
        <source src="/시민법정_참심제_reggae1.mp3" type="audio/mpeg" />
      </audio>

      <div className="max-w-4xl w-full">
        {/* ✅ 닫기 버튼 추가! */}
        {onClose && (
          <div className="flex justify-end mb-4">
            <button
              onClick={onClose}
              className="text-white hover:text-gray-300 text-4xl font-bold transition w-12 h-12 flex items-center justify-center"
            >
              ✕
            </button>
          </div>
        )}
        
        {/* 포스터 이미지 */}
        <div className="relative mb-8">
          <img 
            src="/참심제_웹자보qrcode.png" 
            alt="참심제 포스터" 
            className="w-full h-auto rounded-lg shadow-2xl"
          />
        </div>

        {/* ... 나머지 코드 ... */}
      </div>
    </div>
  )
}

export default Poster
```

---

## 🎯 핵심 수정 요약

### App.jsx
1. ✅ `showPosterModal` state 추가
2. ✅ 네비게이션에 "🎵 포스터 보기" 버튼 추가
3. ✅ 포스터 모달 렌더링 코드 추가

### Poster.jsx
1. ✅ `audioRef` useRef 선언 추가
2. ✅ `onClose` props 지원
3. ✅ X 닫기 버튼 추가
4. ✅ `handleParticipate` 함수 개선

---

## 🔍 왜 이전 배포에서 안 보였을까?

### 문제 원인
1. **App.jsx**: `showPosterModal` state가 없어서 버튼을 눌러도 모달이 열리지 않음
2. **Poster.jsx**: `audioRef`가 선언되지 않아서 콘솔 에러 발생
3. **네비게이션**: 포스터 보기 버튼 자체가 없어서 사용자가 접근할 수 없었음

### 해결 방법
- ✅ 모든 필수 state와 ref를 추가
- ✅ 버튼과 모달 연결 코드 추가
- ✅ onClose props로 모달 닫기 기능 구현

---

## 📊 변경 통계

| 파일 | 추가된 줄 | 변경된 줄 | 주요 기능 |
|------|----------|----------|---------|
| App.jsx | 8줄 | 7줄 | 포스터 모달 통합 |
| Poster.jsx | 15줄 | 10줄 | audioRef, onClose 추가 |
| **총계** | **23줄** | **17줄** | **완전한 모달 시스템** |

---

**이제 배포하면 "🎵 포스터 보기" 버튼이 정상적으로 나타납니다!**
